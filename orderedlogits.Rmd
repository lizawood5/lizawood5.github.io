---
title: "Ordinal Logits"
subtitle: "A quick look at polr and vglm"
---

```{r setup, echo=T, include = F}
library(MASS) # polr package
library(VGAM) # vglm package
library(dplyr)
```

```{r, include = F}
df <- read.csv("data/modeldf_8.16.20_v4.csv")
df <- df %>% dplyr::select(-X, -sequence3_strict_FEP, -sequence3_lax_NMP, -sequence3_lax_FEP, -consulting2)
colnames(df) <- c("stages", "income", "farm.size", "education", "blame.ag", "econ.values", "envt.values", "self.cert", "wqc.perc", "info.count")
dfr <- round(df[ ,c(3,5,6,7,9)], 2)
dff <- df[ ,c(1,2,4,8,10)]
df <- cbind(dfr, dff)
df <- df %>% dplyr::select(stages, income, farm.size, education, blame.ag, econ.values, envt.values, self.cert, wqc.perc, info.count)
```

```{r inspect data}
head(df)
# Make sure your dependent variable is in the right order
df$stages = factor(df$stages, c('None', 'Conceptual', 'Applied'))
```

**Packages for ordinal logits**  
The ordinal model in `polr` defaults to a cumulative link function...
Hess = T is for the Hessian matrix...


```{r models}
polr.model <- polr(stages ~ farm.size + income + education +  blame.ag + econ.values + envt.values + info.count + self.cert + wqc.perc, data = df, Hess = T)
```

VGAM can model more advanced ordinal regressions, but so it requires a few more model specifications that `polr` the family needs to be specific, as there are multiple link functions. One must also specify that the parallel odds addumotion, also called the proportional odds assumption, has been met. And the default in polr is to reverse the order of the ordered dependent variable, so most intuitive interpretations require that the order be reversed.

A secondary link function is a sequential, or continuation ratio (labeled as cratio in VGAM).

```{r}
vgam.model.cumulative = vglm(ordered(stages) ~ farm.size + income + education +  blame.ag + econ.values + envt.values + info.count + self.cert + wqc.perc, data = df, family=cumulative(parallel = T, reverse = T))

vgam.model.cratio = vglm(ordered(stages) ~ farm.size + income + education +  blame.ag + econ.values + envt.values + info.count + self.cert + wqc.perc, data = df, family=cratio(parallel = T, reverse = T))
```